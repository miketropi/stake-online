(self.webpackChunk=self.webpackChunk||[]).push([[659],{29321:(e,t,n)=>{"use strict";var o=n(13469),r=n(7340),s=n(84390).formatters,a=n(18269),i=n(33677),u=n(2561),p=n(88894);function c(e){this.eth=e;var t=null;this._detectedAddress=null,this._lastSyncCheck=null,Object.defineProperty(this,"registry",{get:function(){return new i(this)},enumerable:!0}),Object.defineProperty(this,"resolverMethodHandler",{get:function(){return new u(this.registry)},enumerable:!0}),Object.defineProperty(this,"registryAddress",{get:function(){return t},set:function(e){t=null!==e?s.inputAddressFormatter(e):e},enumerable:!0})}c.prototype.supportsInterface=function(e,t,n){return this.getResolver(e).then((function(e){return a.isHexStrict(t)||(t=a.sha3(t).slice(0,10)),e.methods.supportsInterface(t).call(n)})).catch((function(e){if(!o.isFunction(n))throw e;n(e,null)}))},c.prototype.resolver=function(e,t){return this.registry.resolver(e,t)},c.prototype.getResolver=function(e,t){return this.registry.getResolver(e,t)},c.prototype.setResolver=function(e,t,n,o){return this.registry.setResolver(e,t,n,o)},c.prototype.setRecord=function(e,t,n,o,r,s){return this.registry.setRecord(e,t,n,o,r,s)},c.prototype.setSubnodeRecord=function(e,t,n,o,r,s,a){return this.registry.setSubnodeRecord(e,t,n,o,r,s,a)},c.prototype.setApprovalForAll=function(e,t,n,o){return this.registry.setApprovalForAll(e,t,n,o)},c.prototype.isApprovedForAll=function(e,t,n){return this.registry.isApprovedForAll(e,t,n)},c.prototype.recordExists=function(e,t){return this.registry.recordExists(e,t)},c.prototype.setSubnodeOwner=function(e,t,n,o,r){return this.registry.setSubnodeOwner(e,t,n,o,r)},c.prototype.getTTL=function(e,t){return this.registry.getTTL(e,t)},c.prototype.setTTL=function(e,t,n,o){return this.registry.setTTL(e,t,n,o)},c.prototype.getOwner=function(e,t){return this.registry.getOwner(e,t)},c.prototype.setOwner=function(e,t,n,o){return this.registry.setOwner(e,t,n,o)},c.prototype.getAddress=function(e,t){return this.resolverMethodHandler.method(e,"addr",[]).call(t)},c.prototype.setAddress=function(e,t,n,o){return this.resolverMethodHandler.method(e,"setAddr",[t]).send(n,o)},c.prototype.getPubkey=function(e,t){return this.resolverMethodHandler.method(e,"pubkey",[],null,t).call(t)},c.prototype.setPubkey=function(e,t,n,o,r){return this.resolverMethodHandler.method(e,"setPubkey",[t,n]).send(o,r)},c.prototype.getContent=function(e,t){return this.resolverMethodHandler.method(e,"content",[]).call(t)},c.prototype.setContent=function(e,t,n,o){return this.resolverMethodHandler.method(e,"setContent",[t]).send(n,o)},c.prototype.getContenthash=function(e,t){return this.resolverMethodHandler.method(e,"contenthash",[],p.decode).call(t)},c.prototype.setContenthash=function(e,t,n,r){var s;try{s=p.encode(t)}catch(e){var a=new Error("Could not encode "+t+". See docs for supported hash protocols.");if(o.isFunction(r))return void r(a,null);throw a}return this.resolverMethodHandler.method(e,"setContenthash",[s]).send(n,r)},c.prototype.getMultihash=function(e,t){return this.resolverMethodHandler.method(e,"multihash",[]).call(t)},c.prototype.setMultihash=function(e,t,n,o){return this.resolverMethodHandler.method(e,"multihash",[t]).send(n,o)},c.prototype.checkNetwork=async function(){var e=new Date/1e3;if(!this._lastSyncCheck||e-this._lastSyncCheck>3600){var t=e-(await this.eth.getBlock("latest")).timestamp;if(t>3600)throw new Error("Network not synced; last block was "+t+" seconds ago");this._lastSyncCheck=e}if(this.registryAddress)return this.registryAddress;if(!this._detectedAddress){var n=await this.eth.net.getNetworkType(),o=r.addresses[n];if(void 0===o)throw new Error("ENS is not supported on network "+n);return this._detectedAddress=o,this._detectedAddress}return this._detectedAddress},e.exports=c},7340:e=>{"use strict";e.exports={addresses:{main:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",ropsten:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",rinkeby:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",goerli:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e"},interfaceIds:{addr:"0x3b3b57de",setAddr:"0x3b3b57de",pubkey:"0xc8690233",setPubkey:"0xc8690233",contenthash:"0xbc1c58d1",setContenthash:"0xbc1c58d1",content:"0xd8389dc5",setContent:"0xd8389dc5"}}},33677:(e,t,n)=>{"use strict";var o=n(13469),r=n(31692),s=n(59873),a=n(4017),i=n(84390).formatters,u=n(18269),p=n(26116),c=n(29234);function d(e){var t=this;this.ens=e,this.contract=e.checkNetwork().then((function(e){var n=new r(p,e);return n.setProvider(t.ens.eth.currentProvider),n}))}d.prototype.owner=function(e,t){return console.warn('Deprecated: Please use the "getOwner" method instead of "owner".'),this.getOwner(e,t)},d.prototype.getOwner=function(e,t){var n=new a(!0);return this.contract.then((function(t){return t.methods.owner(s.hash(e)).call()})).then((function(e){o.isFunction(t)?t(e,e):n.resolve(e)})).catch((function(e){o.isFunction(t)?t(e,null):n.reject(e)})),n.eventEmitter},d.prototype.setOwner=function(e,t,n,r){var u=new a(!0);return this.contract.then((function(o){return o.methods.setOwner(s.hash(e),i.inputAddressFormatter(t)).send(n)})).then((function(e){o.isFunction(r)?r(e,e):u.resolve(e)})).catch((function(e){o.isFunction(r)?r(e,null):u.reject(e)})),u.eventEmitter},d.prototype.getTTL=function(e,t){var n=new a(!0);return this.contract.then((function(t){return t.methods.ttl(s.hash(e)).call()})).then((function(e){o.isFunction(t)?t(e,e):n.resolve(e)})).catch((function(e){o.isFunction(t)?t(e,null):n.reject(e)})),n.eventEmitter},d.prototype.setTTL=function(e,t,n,r){var i=new a(!0);return this.contract.then((function(o){return o.methods.setTTL(s.hash(e),t).send(n)})).then((function(e){o.isFunction(r)?r(e,e):i.resolve(e)})).catch((function(e){o.isFunction(r)?r(e,null):i.reject(e)})),i.eventEmitter},d.prototype.setSubnodeOwner=function(e,t,n,r,p){var c=new a(!0);return u.isHexStrict(t)||(t=u.sha3(t)),this.contract.then((function(o){return o.methods.setSubnodeOwner(s.hash(e),t,i.inputAddressFormatter(n)).send(r)})).then((function(e){o.isFunction(p)?p(e,e):c.resolve(e)})).catch((function(e){o.isFunction(p)?p(e,null):c.reject(e)})),c.eventEmitter},d.prototype.setRecord=function(e,t,n,r,u,p){var c=new a(!0);return this.contract.then((function(o){return o.methods.setRecord(s.hash(e),i.inputAddressFormatter(t),i.inputAddressFormatter(n),r).send(u)})).then((function(e){o.isFunction(p)?p(e,e):c.resolve(e)})).catch((function(e){o.isFunction(p)?p(e,null):c.reject(e)})),c.eventEmitter},d.prototype.setSubnodeRecord=function(e,t,n,r,p,c,d){var y=new a(!0);return u.isHexStrict(t)||(t=u.sha3(t)),this.contract.then((function(o){return o.methods.setSubnodeRecord(s.hash(e),t,i.inputAddressFormatter(n),i.inputAddressFormatter(r),p).send(c)})).then((function(e){o.isFunction(d)?d(e,e):y.resolve(e)})).catch((function(e){o.isFunction(d)?d(e,null):y.reject(e)})),y.eventEmitter},d.prototype.setApprovalForAll=function(e,t,n,r){var s=new a(!0);return this.contract.then((function(o){return o.methods.setApprovalForAll(i.inputAddressFormatter(e),t).send(n)})).then((function(e){o.isFunction(r)?r(e,e):s.resolve(e)})).catch((function(e){o.isFunction(r)?r(e,null):s.reject(e)})),s.eventEmitter},d.prototype.isApprovedForAll=function(e,t,n){var r=new a(!0);return this.contract.then((function(n){return n.methods.isApprovedForAll(i.inputAddressFormatter(e),i.inputAddressFormatter(t)).call()})).then((function(e){o.isFunction(n)?n(e,e):r.resolve(e)})).catch((function(e){o.isFunction(n)?n(e,null):r.reject(e)})),r.eventEmitter},d.prototype.recordExists=function(e,t){var n=new a(!0);return this.contract.then((function(t){return t.methods.recordExists(s.hash(e)).call()})).then((function(e){o.isFunction(t)?t(e,e):n.resolve(e)})).catch((function(e){o.isFunction(t)?t(e,null):n.reject(e)})),n.eventEmitter},d.prototype.resolver=function(e,t){return console.warn('Deprecated: Please use the "getResolver" method instead of "resolver".'),this.getResolver(e,t)},d.prototype.getResolver=function(e,t){var n=this;return this.contract.then((function(t){return t.methods.resolver(s.hash(e)).call()})).then((function(e){var s=new r(c,e);if(s.setProvider(n.ens.eth.currentProvider),!o.isFunction(t))return s;t(s,s)})).catch((function(e){if(!o.isFunction(t))throw e;t(e,null)}))},d.prototype.setResolver=function(e,t,n,r){var u=new a(!0);return this.contract.then((function(o){return o.methods.setResolver(s.hash(e),i.inputAddressFormatter(t)).send(n)})).then((function(e){o.isFunction(r)?r(e,e):u.resolve(e)})).catch((function(e){o.isFunction(r)?r(e,null):u.reject(e)})),u.eventEmitter},e.exports=d},60306:(e,t,n)=>{"use strict";var o=n(29321);e.exports=o},2561:(e,t,n)=>{"use strict";var o=n(4017),r=n(59873),s=n(84390).errors,a=n(13469),i=n(7340).interfaceIds;function u(e){this.registry=e}u.prototype.method=function(e,t,n,o,r){return{call:this.call.bind({ensName:e,methodName:t,methodArguments:n,callback:r,parent:this,outputFormatter:o}),send:this.send.bind({ensName:e,methodName:t,methodArguments:n,callback:r,parent:this})}},u.prototype.call=function(e){var t=this,n=new o,r=this.parent.prepareArguments(this.ensName,this.methodArguments),s=this.outputFormatter||null;return this.parent.registry.getResolver(this.ensName).then((async function(o){await t.parent.checkInterfaceSupport(o,t.methodName),t.parent.handleCall(n,o.methods[t.methodName],r,s,e)})).catch((function(t){a.isFunction(e)?e(t,null):n.reject(t)})),n.eventEmitter},u.prototype.send=function(e,t){var n=this,r=new o,s=this.parent.prepareArguments(this.ensName,this.methodArguments);return this.parent.registry.getResolver(this.ensName).then((async function(o){await n.parent.checkInterfaceSupport(o,n.methodName),n.parent.handleSend(r,o.methods[n.methodName],s,e,t)})).catch((function(e){a.isFunction(t)?t(e,null):r.reject(e)})),r.eventEmitter},u.prototype.handleCall=function(e,t,n,o,r){return t.apply(this,n).call().then((function(t){o&&(t=o(t)),a.isFunction(r)?r(t,t):e.resolve(t)})).catch((function(t){a.isFunction(r)?r(t,null):e.reject(t)})),e},u.prototype.handleSend=function(e,t,n,o,r){return t.apply(this,n).send(o).on("sending",(function(){e.eventEmitter.emit("sending")})).on("sent",(function(){e.eventEmitter.emit("sent")})).on("transactionHash",(function(t){e.eventEmitter.emit("transactionHash",t)})).on("confirmation",(function(t,n){e.eventEmitter.emit("confirmation",t,n)})).on("receipt",(function(t){e.eventEmitter.emit("receipt",t),e.resolve(t),a.isFunction(r)&&r(t,t)})).on("error",(function(t){e.eventEmitter.emit("error",t),a.isFunction(r)?r(t,null):e.reject(t)})),e},u.prototype.prepareArguments=function(e,t){var n=r.hash(e);return t.length>0?(t.unshift(n),t):[n]},u.prototype.checkInterfaceSupport=async function(e,t){if(i[t]){var n=!1;try{n=await e.methods.supportsInterface(i[t]).call()}catch(t){console.warn('Could not verify interface of resolver contract at "'+e.options.address+'". ')}if(!n)throw s.ResolverMethodMissingError(e.options.address,t)}},e.exports=u},88894:(e,t,n)=>{var o=n(78138);e.exports={decode:function(e){var t=null,n=null,r=null;if(e&&e.error)return{protocolType:null,decoded:e.error};if(e)try{t=o.decode(e);var s=o.getCodec(e);"ipfs-ns"===s?n="ipfs":"swarm-ns"===s?n="bzz":"onion"===s?n="onion":"onion3"===s?n="onion3":t=e}catch(e){r=e.message}return{protocolType:n,decoded:t,error:r}},encode:function(e){var t,n,r=!1;if(e){var s=e.match(/^(ipfs|bzz|onion|onion3):\/\/(.*)/)||e.match(/\/(ipfs)\/(.*)/);s&&(n=s[1],t=s[2]);try{if("ipfs"===n)t.length>=4&&(r="0x"+o.fromIpfs(t));else if("bzz"===n)t.length>=4&&(r="0x"+o.fromSwarm(t));else if("onion"===n)16===t.length&&(r="0x"+o.encode("onion",t));else{if("onion3"!==n)throw new Error("Could not encode content hash: unsupported content type");56===t.length&&(r="0x"+o.encode("onion3",t))}}catch(e){throw e}}return r}}},26116:e=>{"use strict";e.exports=[{constant:!0,inputs:[{name:"node",type:"bytes32"}],name:"resolver",outputs:[{name:"",type:"address"}],payable:!1,type:"function"},{constant:!0,inputs:[{name:"node",type:"bytes32"}],name:"owner",outputs:[{name:"",type:"address"}],payable:!1,type:"function"},{constant:!1,inputs:[{name:"node",type:"bytes32"},{name:"label",type:"bytes32"},{name:"owner",type:"address"}],name:"setSubnodeOwner",outputs:[],payable:!1,type:"function"},{constant:!1,inputs:[{name:"node",type:"bytes32"},{name:"ttl",type:"uint64"}],name:"setTTL",outputs:[],payable:!1,type:"function"},{constant:!0,inputs:[{name:"node",type:"bytes32"}],name:"ttl",outputs:[{name:"",type:"uint64"}],payable:!1,type:"function"},{constant:!1,inputs:[{name:"node",type:"bytes32"},{name:"resolver",type:"address"}],name:"setResolver",outputs:[],payable:!1,type:"function"},{constant:!1,inputs:[{name:"node",type:"bytes32"},{name:"owner",type:"address"}],name:"setOwner",outputs:[],payable:!1,type:"function"},{anonymous:!1,inputs:[{indexed:!0,name:"node",type:"bytes32"},{indexed:!1,name:"owner",type:"address"}],name:"Transfer",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"node",type:"bytes32"},{indexed:!0,name:"label",type:"bytes32"},{indexed:!1,name:"owner",type:"address"}],name:"NewOwner",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"node",type:"bytes32"},{indexed:!1,name:"resolver",type:"address"}],name:"NewResolver",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"node",type:"bytes32"},{indexed:!1,name:"ttl",type:"uint64"}],name:"NewTTL",type:"event"},{constant:!1,inputs:[{internalType:"bytes32",name:"node",type:"bytes32"},{internalType:"address",name:"owner",type:"address"},{internalType:"address",name:"resolver",type:"address"},{internalType:"uint64",name:"ttl",type:"uint64"}],name:"setRecord",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{internalType:"address",name:"operator",type:"address"},{internalType:"bool",name:"approved",type:"bool"}],name:"setApprovalForAll",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"operator",type:"address"},{indexed:!1,internalType:"bool",name:"approved",type:"bool"}],name:"ApprovalForAll",type:"event"},{constant:!0,inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"address",name:"operator",type:"address"}],name:"isApprovedForAll",outputs:[{internalType:"bool",name:"",type:"bool"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{internalType:"bytes32",name:"node",type:"bytes32"}],name:"recordExists",outputs:[{internalType:"bool",name:"",type:"bool"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{internalType:"bytes32",name:"node",type:"bytes32"},{internalType:"bytes32",name:"label",type:"bytes32"},{internalType:"address",name:"owner",type:"address"},{internalType:"address",name:"resolver",type:"address"},{internalType:"uint64",name:"ttl",type:"uint64"}],name:"setSubnodeRecord",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"}]},29234:e=>{"use strict";e.exports=[{constant:!0,inputs:[{name:"interfaceID",type:"bytes4"}],name:"supportsInterface",outputs:[{name:"",type:"bool"}],payable:!1,type:"function"},{constant:!0,inputs:[{name:"node",type:"bytes32"},{name:"contentTypes",type:"uint256"}],name:"ABI",outputs:[{name:"contentType",type:"uint256"},{name:"data",type:"bytes"}],payable:!1,type:"function"},{constant:!1,inputs:[{name:"node",type:"bytes32"},{name:"hash",type:"bytes"}],name:"setMultihash",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[{name:"node",type:"bytes32"}],name:"multihash",outputs:[{name:"",type:"bytes"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"node",type:"bytes32"},{name:"x",type:"bytes32"},{name:"y",type:"bytes32"}],name:"setPubkey",outputs:[],payable:!1,type:"function"},{constant:!0,inputs:[{name:"node",type:"bytes32"}],name:"content",outputs:[{name:"ret",type:"bytes32"}],payable:!1,type:"function"},{constant:!0,inputs:[{name:"node",type:"bytes32"}],name:"addr",outputs:[{name:"ret",type:"address"}],payable:!1,type:"function"},{constant:!1,inputs:[{name:"node",type:"bytes32"},{name:"contentType",type:"uint256"},{name:"data",type:"bytes"}],name:"setABI",outputs:[],payable:!1,type:"function"},{constant:!0,inputs:[{name:"node",type:"bytes32"}],name:"name",outputs:[{name:"ret",type:"string"}],payable:!1,type:"function"},{constant:!1,inputs:[{name:"node",type:"bytes32"},{name:"name",type:"string"}],name:"setName",outputs:[],payable:!1,type:"function"},{constant:!1,inputs:[{name:"node",type:"bytes32"},{name:"hash",type:"bytes32"}],name:"setContent",outputs:[],payable:!1,type:"function"},{constant:!0,inputs:[{name:"node",type:"bytes32"}],name:"pubkey",outputs:[{name:"x",type:"bytes32"},{name:"y",type:"bytes32"}],payable:!1,type:"function"},{constant:!1,inputs:[{name:"node",type:"bytes32"},{name:"addr",type:"address"}],name:"setAddr",outputs:[],payable:!1,type:"function"},{inputs:[{name:"ensAddr",type:"address"}],payable:!1,type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,name:"node",type:"bytes32"},{indexed:!1,name:"a",type:"address"}],name:"AddrChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"node",type:"bytes32"},{indexed:!1,name:"hash",type:"bytes32"}],name:"ContentChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"node",type:"bytes32"},{indexed:!1,name:"name",type:"string"}],name:"NameChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"node",type:"bytes32"},{indexed:!0,name:"contentType",type:"uint256"}],name:"ABIChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"node",type:"bytes32"},{indexed:!1,name:"x",type:"bytes32"},{indexed:!1,name:"y",type:"bytes32"}],name:"PubkeyChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"node",type:"bytes32"},{indexed:!1,name:"hash",type:"bytes"}],name:"ContenthashChanged",type:"event"},{constant:!0,inputs:[{name:"node",type:"bytes32"}],name:"contenthash",outputs:[{name:"",type:"bytes"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"node",type:"bytes32"},{name:"hash",type:"bytes"}],name:"setContenthash",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"}]}}]);
//# sourceMappingURL=web3-eth-ens.js.map